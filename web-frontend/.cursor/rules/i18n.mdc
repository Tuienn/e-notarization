---
description: Internationalization (i18n) guidelines using react-i18next
globs: "**/*.{ts,tsx}"
alwaysApply: false
---

# Internationalization (i18n) Rules

This project uses **react-i18next**. All user-facing text MUST be externalized to translation files.

## Core Requirements

1. **NEVER hardcode user-facing text** - Use `t()` function
2. **Always import useTranslation** - `const { t } = useTranslation('namespace')`
3. **Use appropriate namespace** - Match feature area (auth, document, upload, etc.)
4. **Create translation keys** - Add to `src/i18n/locales/en/[namespace].json`
5. **MANDATORY: Register new translations** - Import new JSON file in `src/i18n/index.ts`

## Project Structure

```
src/i18n/
├── index.ts              # i18n configuration (MUST import all JSON files)
└── locales/
    └── en/               # English translations
        ├── auth.json     # Authentication
        ├── layout.json   # Navigation
        ├── home.json     # Home page
        └── [feature].json # Feature-specific
```

## Registering New Translations

**CRITICAL**: Whenever you create a new translation file, you MUST register it in `src/i18n/index.ts`:

### Steps:

1. **Import the JSON file** (use UPPERCASE naming convention):
```typescript
import EN_FEATURE from './locales/en/feature.json'
```

2. **Add to resources object**:
```typescript
export const resources = {
    en: { 
        home: EN_HOME, 
        layout: EN_LAYOUT, 
        auth: EN_AUTH,
        feature: EN_FEATURE  // Add here
    }
}
```

3. **Add to ns array** (if it's a commonly used namespace):
```typescript
ns: ['home', 'auth', 'feature']
```

### Example:

**Before** (creating `personal.json`):
```typescript
// src/i18n/index.ts
import EN_HOME from './locales/en/home.json'
import EN_LAYOUT from './locales/en/layout.json'
import EN_AUTH from './locales/en/auth.json'

export const resources = {
    en: { home: EN_HOME, layout: EN_LAYOUT, auth: EN_AUTH }
}
```

**After** (registering `personal.json`):
```typescript
// src/i18n/index.ts
import EN_HOME from './locales/en/home.json'
import EN_LAYOUT from './locales/en/layout.json'
import EN_AUTH from './locales/en/auth.json'
import EN_PERSONAL from './locales/en/personal.json'

export const resources = {
    en: { home: EN_HOME, layout: EN_LAYOUT, auth: EN_AUTH, personal: EN_PERSONAL }
}
```

## Usage Patterns

### Import Hook

```typescript
import { useTranslation } from 'react-i18next'

const Component: React.FC = () => {
    const { t } = useTranslation('auth') // Specify namespace
    // ...
}
```

### Use Translation Function

```typescript
// Simple text
<Typography>{t('title')}</Typography>

// Nested keys
<Button>{t('actions.submit')}</Button>

// Notifications
notify(t('success.messageSent'), 'success')
notify(t('error.invalidInput'), 'error')
```

### Translation File Structure

```json
{
    "title": "Page Title",
    "actions": {
        "submit": "Submit",
        "cancel": "Cancel"
    },
    "success": {
        "messageSent": "Message sent successfully"
    },
    "error": {
        "invalidInput": "Invalid input"
    }
}
```

## Common Patterns

### Form Fields

```typescript
const { t } = useTranslation('auth')

<TextField
    label={t('login.username')}
    error={!!errors.username}
    helperText={errors.username ? t('login.error.usernameRequired') : ''}
/>
```

### Buttons and Actions

```typescript
<Button type="submit">{t('login.submit')}</Button>
<Button onClick={handleDelete}>{t('actions.delete')}</Button>
```

### Notifications with useMutation

```typescript
const { t } = useTranslation('document')
const notify = useNotify()

const mutation = useMutation({
    mutationFn: (data) => DocumentService.create(data),
    onSuccess: () => {
        notify(t('create.success'), 'success')
    },
    onError: () => {
        notify(t('create.error'), 'error')
    }
})
```

## Naming Conventions

### Namespaces
- `auth` - Login, register, password reset
- `layout` - Navigation, header, footer
- `home` - Home page content
- `[feature]` - Feature-specific (document, upload, profile)

### Key Structure
Use dot notation for logical grouping:

```json
{
    "feature": {
        "title": "...",
        "fields": { "fieldName": "..." },
        "actions": { "create": "...", "update": "..." },
        "success": { "created": "..." },
        "error": { "createFailed": "..." }
    }
}
```

## Examples

### ❌ DON'T

```typescript
notify('Login successful', 'success')
<Button>Submit</Button>
<Typography>Welcome Back</Typography>
```

### ✅ DO

```typescript
const { t } = useTranslation('auth')
notify(t('login.success.loginSuccess'), 'success')
<Button>{t('login.submit')}</Button>
<Typography>{t('login.title')}</Typography>
```

## Checklist

When adding new features:

- [ ] Identify appropriate namespace or create new one
- [ ] Create/update JSON file in `src/i18n/locales/en/`
- [ ] **CRITICAL: Import new JSON file in `src/i18n/index.ts`**
- [ ] **CRITICAL: Add to `resources` object in `src/i18n/index.ts`**
- [ ] Import `useTranslation` hook
- [ ] Use `t()` for all user-facing text
- [ ] Use `t()` in notification messages (onSuccess/onError)
- [ ] Use `t()` for form labels, placeholders, helpers
- [ ] Use `t()` for buttons and actions
- [ ] Use `t()` for validation errors
- [ ] No hardcoded strings remain
